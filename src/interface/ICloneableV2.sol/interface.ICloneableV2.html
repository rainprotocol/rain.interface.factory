<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ICloneableV2</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../../book.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../../../index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">src</li><li class="chapter-item "><a href="../../../src/concrete/index.html">❱ concrete</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/concrete/CloneFactory.sol/error.ZeroImplementationCodeSize.html">ZeroImplementationCodeSize</a></li><li class="chapter-item "><a href="../../../src/concrete/CloneFactory.sol/error.InitializationFailed.html">InitializationFailed</a></li><li class="chapter-item "><a href="../../../src/concrete/CloneFactory.sol/contract.CloneFactory.html">CloneFactory</a></li><li class="chapter-item "><a href="../../../src/concrete/CloneFactory.sol/constants.CloneFactory.html">CloneFactory constants</a></li></ol></li><li class="chapter-item expanded "><a href="../../../src/interface/index.html">❱ interface</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/interface/deprecated/index.html">❱ deprecated</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/interface/deprecated/ICloneableFactoryV1.sol/interface.ICloneableFactoryV1.html">ICloneableFactoryV1</a></li><li class="chapter-item "><a href="../../../src/interface/deprecated/ICloneableV1.sol/interface.ICloneableV1.html">ICloneableV1</a></li><li class="chapter-item "><a href="../../../src/interface/deprecated/IFactory.sol/interface.IFactory.html">IFactory</a></li></ol></li><li class="chapter-item "><a href="../../../src/interface/ICloneableFactoryV2.sol/interface.ICloneableFactoryV2.html">ICloneableFactoryV2</a></li><li class="chapter-item expanded "><a href="../../../src/interface/ICloneableV2.sol/interface.ICloneableV2.html" class="active">ICloneableV2</a></li><li class="chapter-item "><a href="../../../src/interface/ICloneableV2.sol/constants.ICloneableV2.html">ICloneableV2 constants</a></li></ol></li><li class="chapter-item "><a href="../../../src/lib/index.html">❱ lib</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/lib/LibIERC1820.sol/constants.LibIERC1820.html">LibIERC1820 constants</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rainprotocol/rain.factory" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="icloneablev2"><a class="header" href="#icloneablev2">ICloneableV2</a></h1>
<p><a href="https://github.com/rainprotocol/rain.factory/blob/368edecd48ee6184f5d77a46ccd5d2aa19109fae/src/interface/ICloneableV2.sol">Git Source</a></p>
<p>Interface for cloneable contracts that support initialization.</p>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="initialize"><a class="header" href="#initialize">initialize</a></h3>
<p>Initialize is intended to work like constructors but for cloneable
proxies. The <code>ICloneableV2</code> contract MUST ensure that initialize can NOT
be called more than once. The <code>ICloneableV2</code> contract is designed to be
deployed by an <code>ICloneableFactoryV2</code> but MUST NOT assume that it will be.
It is possible for someone to directly deploy an <code>ICloneableV2</code> and fail
to call initialize before other functions are called, and end users MAY
NOT realise or know how to confirm a safe deployment state. The
<code>ICloneableV2</code> MUST take appropriate measures to ensure that functions
called before initialize are safe to do so, or revert.
To be fully generic, <code>initilize</code> accepts <code>bytes</code> and so MUST ABI decode
within the initialize function. This allows a single factory to service
arbitrary cloneable proxies but also erases the type of the
initialization config from the ABI. As tooling will inevitably require
the ABI to be known, it is RECOMMENDED that the <code>ICloneableV2</code> contract
implements a typed <code>initialize</code> function that overloads the generic
<code>initialize(bytes)</code> function. This overloaded function MUST revert with
<code>InitializeSignatureFn</code> always, so that it is NEVER accidentally called.
This avoids complex and expensive delegate call style patterns where a
typed overload has to call back to itself and preserve the sender,
instead we force the caller to know the correct signature and call the
correct function directly with encoded bytes.
If initialization is successful the <code>ICloneableV2</code> MUST return the
keccak256 hash of the string &quot;ICloneableV2.initialize&quot;. This avoids false
positives where a contract building a proxy, such as an
<code>ICloneableFactoryV2</code>, may incorrectly believe that the clone has been
initialized but the implementation doesn't support <code>ICloneableV2</code>.</p>
<p><em>The <code>ICloneableV2</code> interface is identical to <code>ICloneableV1</code> except
that it returns a <code>bytes32</code> success hash.</em></p>
<pre><code class="language-solidity">function initialize(bytes calldata data) external returns (bytes32 success);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>The initialization data.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>success</code></td><td><code>bytes32</code></td><td>keccak256(&quot;ICloneableV2.initialize&quot;) if successful.</td></tr>
</tbody></table>
</div>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<h3 id="initializesignaturefn"><a class="header" href="#initializesignaturefn">InitializeSignatureFn</a></h3>
<p>Overloaded initialize function MUST revert with this error.</p>
<pre><code class="language-solidity">error InitializeSignatureFn();
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../src/interface/ICloneableFactoryV2.sol/interface.ICloneableFactoryV2.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../../src/interface/ICloneableV2.sol/constants.ICloneableV2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../src/interface/ICloneableFactoryV2.sol/interface.ICloneableFactoryV2.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../../src/interface/ICloneableV2.sol/constants.ICloneableV2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../../solidity.min.js"></script>


    </div>
    </body>
</html>
